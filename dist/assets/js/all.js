!function(o){var e=o.module("moviecat",["moviecat_home","moviecat_details","moviecat_movie_list"]);e.config(["$locationProvider",function(o){o.hashPrefix("")}]),e.controller("searchCtrl",["$scope","$window",function(o,e){o.query=function(){var a=o.keyWord;e.location.hash="#/search?q="+a}}])}(angular),function(o){var e=o.module("moviecat_details",["ngRoute","heima"]);e.config(["$routeProvider",function(o){o.when("/details/:id",{templateUrl:"./details/details.html",controller:"detailsController"})}]),e.controller("detailsController",["$scope","$routeParams","hmjsonp",function(o,e,a){a({url:"http://api.douban.com/v2/movie/subject/"+e.id,params:{},callback:function(e){o.movie=e,o.isShow=!1,o.$apply()}})}])}(angular),function(o){o.module("moviecat_home",["ngRoute"]).config(["$routeProvider",function(o){o.when("/home",{templateUrl:"./home/home.html"}).when("/",{redirectTo:"/home"})}])}(angular),function(o){var e=1;o.module("heima",[]).factory("hmjsonp",["$window",function(o){return function(a){var t=a.url+"?";for(var n in a.params)t+=n+"="+a.params[n]+"&";var i="hmjsonp_"+e++;window[i]=a.callback,t+="callback="+i;var r=o.document.createElement("script");r.src=t,o.document.body.appendChild(r)}}])}(angular),function(o){var e=o.module("moviecat_movie_list",["ngRoute","heima"]);e.config(["$routeProvider",function(o){o.when("/:movieType/:page?",{templateUrl:"./movie_list/movie_list.html",controller:"movie_listController"})}]),e.controller("movie_listController",["$scope","hmjsonp","$routeParams","$route","$window",function(o,e,a,t,n){o.pageSize=10,o.pageIndex=(a.page||"1")-0,e({url:"http://api.douban.com/v2/movie/"+a.movieType,params:{count:o.pageSize,start:(o.pageIndex-1)*o.pageSize,q:a.q},callback:function(e){o.movie=e,o.pageCount=n.Math.ceil(e.total/o.pageSize),o.isShow=!1,o.$apply()}}),o.getPage=function(e){e<1||e>o.pageCount||t.updateParams({page:e})}}])}(angular);